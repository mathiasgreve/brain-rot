<!DOCTYPE html>
<html>
{% load static %}
{% load auth_extras %}

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Vinyl&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <title>Brain Rot Dictionary</title>
</head>
<body>
    <h1>Brain Rot Dictionary</h1>

    <!-- Auth buttons -->
    {% if user.is_authenticated %}
        <p>Welcome, {{ user.username }}!</p>
        <form action="{% url 'logout' %}" method="post" style="display: inline;">
            {% csrf_token %}
            <button type="submit" style="background-color: red; color: white; padding: 10px; border-radius: 5px;">
                Logout
            </button>
        </form>
        
    {% else %}
        <a href="{% url 'login' %}">
            <button style="background-color: orange; color: white; padding: 10px; border-radius: 5px;">
                Login
            </button>
        </a>
        <a href="{% url 'signup' %}">
            <button style="background-color: green; color: white; padding: 10px; border-radius: 5px;">
                Sign Up
            </button>
        </a>
    {% endif %}

    <!-- Add Entry Button, only for logged-in users -->
    {% if user.is_authenticated %}
        <a href="{% url 'add_entry' %}">
            <button style="background-color: blue; color: white; padding: 10px; border-radius: 5px;">
                Add a New Entry
            </button>
        </a>
    {% else %}
        <p>Please log in to add a new entry.</p>
    {% endif %}


    <!-- Entries Section -->
    <ul>
        {% for entry in entries %}
            <li>
                <h2>{{ entry.title }}</h2>
                <p>{{ entry.description }}</p>
                <p>Submitted by {{ entry.author.username }} on {{ entry.created_at }}</p>
                <p>Downvotes: {{ entry.downvote_count }}</p>
                <p>Upvotes: {{ entry.upvote_count }}</p>       



                <!-- Voting Section -->
                <div style="margin-top: 10px;">

                    
                    <form action="{% url 'upvote_entry' entry.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" style="background-color: green; color: white; padding: 5px; border-radius: 5px;">
                            Upvote
                        </button>
                    </form>
                    <form action="{% url 'downvote_entry' entry.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" style="background-color: red; color: white; padding: 5px; border-radius: 5px;">
                            Downvote
                        </button>
                    </form>
                    


                </div>
            </li>
        {% empty %}
            <li>No entries available. Please add some!</li>
        {% endfor %}
    </ul>
</body>
</html>
